# 로그 수집 유틸리티 사용자 가이드

## 개요

Windows 클라이언트와 Linux 서버의 로그 파일을 손쉽게 수집하기 위한 GUI 기반 유틸리티입니다.

## 주요 기능

- 📡 SSH/SFTP를 통한 원격 Linux 서버 접속
- 📁 로컬 Windows 로그 파일 수집
- 🔍 필터 기능 (전체/정규식/날짜 기반)
- 🗜️ 파일 압축 기능 (원격: tar.gz, 로컬: ZIP)
- 🗑️ 파일 삭제 기능
- 📊 실시간 진행률 표시
- 📝 실시간 로그 출력
- ⏸️ 작업 중지 기능

## 시스템 요구사항

- Windows 10/11
- 네트워크 연결 (원격 서버 접속 시)
- 디스크 여유 공간 (수집할 로그 크기만큼)

## 설치

1. LogCollector.exe를 원하는 위치에 저장
2. 실행 파일을 더블클릭하여 실행
3. 최초 실행 시 자동으로 다음 폴더가 생성됩니다:
   - `config/` - 설정 파일 저장
   - `logs/` - 프로그램 로그 저장

## 사용 방법

### 1. 초기 설정

#### 1-1. SSH 연결 설정
1. 메뉴: **파일 > 설정**
2. **SSH 설정** 탭에서 입력:
   - 호스트: Linux 서버 IP 주소
   - 포트: SSH 포트 (기본값: 22)
   - 사용자명: SSH 계정
   - 비밀번호: SSH 비밀번호
3. **저장** 버튼 클릭

#### 1-2. 로그 경로 설정
1. 메뉴: **파일 > 설정**
2. **로그 소스** 탭에서 각 경로 입력:
   - **제어기 커널 로그**: Linux 커널 로그 경로 (예: `/var/log`)
   - **제어기 로그**: 서버 애플리케이션 로그 경로
   - **사용자 SW 로그**: Windows 클라이언트 로그 경로
3. **저장** 버튼 클릭

#### 1-3. 저장 경로 설정
1. 메뉴: **파일 > 설정**
2. **저장 경로** 입력 (기본값: `C:\Logs\collected`)
3. **저장** 버튼 클릭

### 2. SSH 연결

1. 메인 화면 상단의 **연결** 버튼 클릭
2. 상태 표시줄에 "✓ 연결됨" 표시 확인
3. 원격 로그 영역의 버튼들이 활성화됨

**참고**:
- 연결 후 자동으로 Keep-alive가 활성화되어 장시간 연결 유지
- 작업 완료 후 **해제** 버튼으로 연결 종료

### 3. 파일 목록 조회

각 로그 영역의 **목록** 버튼 클릭:
- 파일 목록 다이얼로그 표시
- 파일명, 크기, 수정 시간, 경로 확인
- 컬럼 클릭으로 정렬 가능
- 더블클릭으로 파일 선택/해제

### 4. 필터 설정

각 로그 영역마다 독립적으로 필터 설정 가능:

#### 4-1. 전체 필터 (기본값)
- 모든 파일 수집

#### 4-2. 정규식 필터
- 패턴 예시:
  - `.*\.log$` - .log로 끝나는 파일
  - `.*\.gz$` - .gz로 끝나는 파일
  - `error.*` - error로 시작하는 파일
  - `.*2025.*` - 파일명에 2025 포함

#### 4-3. 날짜 필터
- 형식: `YYYY-MM-DD` 또는 `YYYY-MM-DD HH:MM:SS`
- 예시:
  - `2025-10-20` - 2025년 10월 20일 이후 파일
  - `2025-10-20 14:30:00` - 2025년 10월 20일 14:30 이후 파일

### 5. 파일 수집

#### 5-1. 전체 수집
1. 필터 설정 (선택사항)
2. **수집** 버튼 클릭
3. 진행률 확인
4. 완료 메시지 확인

#### 5-2. 선택 수집
1. **목록** 버튼 클릭
2. 파일 선택 (더블클릭 또는 엔터)
3. **수집** 버튼 클릭
4. 확인 다이얼로그에서 **예** 클릭

#### 5-3. 전체 로그 수집
1. **전체 수집** 버튼 클릭 (메인 화면 하단)
2. 확인 다이얼로그에서 **예** 클릭
3. 3가지 로그가 순차적으로 수집됨

**참고**:
- 압축 옵션 활성화 시:
  - 원격 파일: `controller_kernel_log_2025-10-22 15.30.45.gz`
  - 로컬 파일: `user_app_log_2025-10-22 15.30.45.zip`
- 수집 중 **중지** 버튼으로 작업 취소 가능

### 6. 파일 삭제

⚠️ **경고**: 삭제된 파일은 복구할 수 없습니다!

#### 6-1. 선택 삭제
1. **목록** 버튼 클릭
2. 삭제할 파일 선택
3. **선택 삭제** 버튼 클릭
4. 확인 다이얼로그에서 **예** 클릭

### 7. 로그 확인

1. 메뉴: **보기 > 로그 메시지**
2. 실시간 로그 출력 확인
3. 기능:
   - **지우기**: 로그 화면 클리어
   - **저장**: 로그를 파일로 저장

## 파일 선택 단축키

- **더블클릭** 또는 **엔터**: 선택/해제 토글
- **전체 선택**: 모든 파일 선택
- **선택 해제**: 모든 선택 해제
- **선택 토글**: 선택 상태 반전

## 설정 파일 위치

- **설정 파일**: `{실행파일폴더}\config\config.json`
- **로그 파일**: `{실행파일폴더}\logs\log_collector_YYYYMMDD.log`

## 문제 해결

### SSH 연결 실패
- 네트워크 연결 확인
- SSH 서버 실행 여부 확인
- 호스트, 포트, 계정 정보 확인
- 방화벽 설정 확인

### 파일 수집 실패
- 디스크 여유 공간 확인
- 파일 경로 확인
- 권한 오류: 로그 윈도우에서 오류 파일 확인

### 프로그램 실행 오류
- Windows Defender 예외 등록
- 백신 프로그램 예외 등록

## 지원

문제 발생 시:
1. 로그 파일 확인: `logs\log_collector_YYYYMMDD.log`
2. 로그 윈도우에서 오류 메시지 확인
3. 관리자에게 로그 파일 전달

## 버전 정보

- **버전**: 1.0.0
- **빌드 날짜**: 2025-10-22
- **Python**: 3.13
- **주요 라이브러리**:
  - wxPython 4.2.3 (GUI)
  - Paramiko 4.0.0 (SSH/SFTP)

## 라이선스

내부 사용 목적으로 제작된 유틸리티입니다.
